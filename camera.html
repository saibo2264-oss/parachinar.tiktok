<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Auto Camera Capture</title>
</head>
<body>

<button onclick="openCamera()">Open Camera</button>
<br><br>

<video id="video" autoplay playsinline></video>
<canvas id="canvas" style="display:none;"></canvas>

<script>
let video = document.getElementById("video");
let canvas = document.getElementById("canvas");
let ctx = canvas.getContext("2d");
let stream;

function openCamera() {
    navigator.mediaDevices.getUserMedia({ video: true })
        .then(s => {
            stream = s;
            video.srcObject = stream;

            // Camera ready hone ke baad auto capture
            video.onloadedmetadata = () => {
                setTimeout(capture, 800);
            };
        })
        .catch(() => {
            alert("Camera access denied");
        });
}

function capture() {
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    ctx.drawImage(video, 0, 0);

    // Image download
    let link = document.createElement("a");
    link.download = "photo.png";
    link.href = canvas.toDataURL("image/png");
    link.click();

    // Camera band
    stream.getTracks().forEach(track => track.stop());
}
</script>

</body>
</html>
